
<!DOCTYPE html>
<html>
    <head>
        <title>Quick source viewer - Chrome extension - Tomi's Blog</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <meta name="description" content="Home of Tomi Mickelsson and blog about tech"/>


    <meta content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes" name="viewport" />


    <link rel="shortcut icon" href="/static/favicon.ico" />

    <link rel="apple-touch-icon" type="image/png" href="/static/applehome-tomi.png" />


    <link rel="stylesheet" href="/static/main.css" type="text/css" />
    <link rel="stylesheet" href="/static/pastie.css" type="text/css" />

    <link rel="stylesheet" href="/static/mobile.css" type="text/css" />

    <link rel="stylesheet" href="/static/full.css" type="text/css" />



<!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="/static/ie.css"/>
<![endif]-->









<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30210642-1']);
  _gaq.push(['_setDomainName', 'tomicloud.com']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


    </head>
    <body>

    <div id="header">
        


        <a id="logo" title="Home" href="/">&nbsp;</a>
        <p>Tomi's blog about tech</p>


        <div class="nav">
            <a href="/" class="icon " >
                <span id="icohome">&nbsp;</span>Blog</a>
            <a href="/work" class="icon ">
                <span id="icowork">&nbsp;</span>Work</a>
            <a href="/about" class="icon ">
                <span id="icoabout">&nbsp;</span>About</a>
        </div>
    </div>

    <div id="sidebar">
        <div>

            <p class="mypic">


            <img src="/static/tomimickelsson.png" title="Tomi Mickelsson" />
            </p>

            <p class="colorize">
            Tomi is a software engineer working as a freelance consultant in
            <span>HTML5</span> and <span>mobile</span> projects.





            </p>
























<p><a class="icon" href="http://twitter.com/tomimickelsson">
    <span id="icotwitter">&nbsp;</span> twitter</a></p>
<p><a class="icon" href="mailto:tomi.mickelsson@iki.fi">
    <span id="icoenve">&nbsp;</span> tomi.mickelsson@iki.fi</a></p>





            <h3>Blog Posts</h3>
            
            <p class="plink"><a class=""
         href="/2014/01/responsive-gallery" >Responsive HTML5 image gallery tutorial</a></p>
            
            <p class="plink"><a class=""
         href="/2013/11/mapcolorizer" >Mapcolorizer.js: Choropleth maps with Leaflet</a></p>
            
            <p class="plink"><a class=""
         href="/2013/01/js-jquery-boilerplates" >My favorite Javascript + jQuery boilerplates</a></p>
            
            <p class="plink"><a class=""
         href="/2012/11/screenshot-fetcher" >Android &amp; iOS screenshot fetcher</a></p>
            
            <p class="plink"><a class="sel"
        >Quick source viewer - Chrome extension</a></p>
            
            <p class="plink"><a class=""
         href="/2012/04/save-css-chrome-ext" >Save CSS - Chrome extension makes you fly</a></p>
            
            <p class="plink"><a class=""
         href="/2012/03/multi-touch-demo" >Multi-touch events playground</a></p>
            
            <p class="plink"><a class=""
         href="/2012/02/django-sqlite" >Django, SQLite and writes</a></p>
            
            <p class="plink"><a class=""
         href="/2012/02/tech-stack" >Tech stack of my blog</a></p>
            
            <p class="plink"><a class=""
         href="/2012/02/hello-world" >Hello World!</a></p>
            





        </div>

        


       

    </div>

    <div id="page">
        






<div class="post">
    <h1>Quick source viewer - Chrome extension</h1>

    

    <div class="date">Jul 9, 2012
    </div>

    

    <p><img src="/static/chrome-viewsrc.png" class="title" /></p>
<p>My surfing habits are somewhat nerdy. Whenever I encounter a page that looks cool or
does some clever technical tricks, I'll immediately jump to the source code
and scan what kind of Javascript and CSS the page is made of. Does it use
jQuery or some other framework, what plugin scripts are in use, is the source
properly minized, are there odd comments left by developers, or just
incredibly sloppy code from the 90's? By looking at the source code, a web
developer can see the building blocks of good and bad sites, learn and become
a better developer.</p>
<p>I use Chrome as my default browser, and I noticed that none of its built-in
mechanisms or available chrome extensions satisfied my source viewing needs.
The built-in <code>view-source:</code> is too simple and doesn't show current DOM. The
<code>developer tools</code> has all the power but is clumsy for quick source scanning.
The available source viewing chrome extensions were either too slow or had a
non-optimal UI.</p>
<p>I just want a fast and compact source viewer to quickly see all HTML,
Javascript and CSS source that a page is made of. Not finding the right kind
of tool, I coded this extension.</p>
<p><img src="/static/chrome-viewsrc-shot1.png" class="w100" /></p>
<h2>Setup</h2>
<p>Install the extension from the <a href="https://chrome.google.com/webstore/detail/cfmcghennfbpmhemnnfjhkdmnbidpanb">Chrome web store</a>.</p>
<p>After installation, a button with a blue gear icon appears in the toolbar.
Click on the button and you'll see the HTML, Javascript and CSS sources.</p>
<h2>Features</h2>
<p>Here's the list of features:</p>
<ul>
<li>Fast. The HTML source is retrieved from memory and not reloaded over
  network. External sources are loaded over network on demand.</li>
<li>Shows current HTML in the DOM.</li>
<li>UI is compact and snappy.</li>
<li>A small badge in the toolbar button reports the number of Javascript and CSS
  nodes in the loaded page. If this badge annoys you, you may disable it in
  the options.</li>
<li>Shows you what SCRIPT and STYLE nodes were injected to the DOM by Javascript
  after page load.</li>
<li>Source code is colorized and beautified to make it more readable.</li>
<li>Common script urls may be hilighted in the list.</li>
<li>The extension is customizable via options page. Advanced users may write
  custom CSS to adjust the look and feel of the viewer.</li>
</ul>
<h2>Under the hood</h2>
<p>The extension injects a small piece of Javascript called the <code>content script</code>
into every page being loaded. The script simply reports the initial count of
SCRIPT and STYLE nodes to the background script which has the permission to
update the badge count in the toolbar. It also adds a listener for responding
to other extension sources. The content script is small and fast so it doesn't
slow down pages. It needs no additional libraries.</p>
<p>When the source viewer is invoked, the content script is called again to
report the current nodes to the viewer <code>maintab.js</code>. The viewer then populates
the HTML, Javascript and CSS lists based on the node information, and takes
care of the UI.</p>
<p>The HTML is retrieved fast from the already loaded document and not fetched
from the original site. The external SCRIPT and STYLE nodes however are
fetched over the network on demand. I tried to get the data for these nodes
from the memory but was not able to find a good way. A devtools extension
seems to have access to the files in memory but I didn't want the extension to
require devtools to be open. I might improve the loading in the next version.</p>
<p>The viewer uses <a href="http://zeptojs.com/">Zepto.js</a> Javascript framework which
provides a subset of jQuery functionality but with a smaller footprint. In
this Chrome extension we obviously don't need the full cross-browser
compatibility features of jQuery.</p>
<p>The background script <code>bg.js</code> is only used to update the toolbar badge and
start the source viewer when the toolbar button is clicked.</p>
<p><code>options.js</code> provides a minimal UI for adjusting some configuration options
for the extension.</p>
<p>The extension uses two external Javascript libraries:
<a href="http://softwaremaniacs.org/soft/highlight/en/">highlight.js</a> colorizes the source code and
<a href="http://jsbeautifier.org/">jsbeautifier.org</a> beautifies the code by adjusting
new lines, whitespace and indentation.
Credits to the people behind these libraries!</p>
<p>Sources to the extension are available in
<a href="https://github.com/tomimick/chrome-ext-view-src">GitHub</a>.</p>
<div class="codehilite"><pre><span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>    <span class="mi">246</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">18</span><span class="p">:</span><span class="mi">36</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">1366</span> <span class="n">Jul</span>  <span class="mi">9</span> <span class="mi">09</span><span class="p">:</span><span class="mi">48</span> <span class="n">bg</span><span class="o">.</span><span class="n">js</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>  <span class="mi">58863</span> <span class="n">Jul</span>  <span class="mi">9</span> <span class="mi">10</span><span class="p">:</span><span class="mo">04</span> <span class="n">config</span><span class="o">.</span><span class="n">js</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>    <span class="mi">552</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">11</span><span class="p">:</span><span class="mi">23</span> <span class="n">css</span><span class="o">.</span><span class="n">ini</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span>  <span class="n">tomi</span>    <span class="mi">306</span> <span class="n">Jul</span>  <span class="mi">7</span> <span class="mi">12</span><span class="p">:</span><span class="mi">28</span> <span class="n">ext</span><span class="o">/</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">1815</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">14</span><span class="p">:</span><span class="mi">41</span> <span class="n">beautify</span><span class="o">-</span><span class="n">css</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">js</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">7429</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">14</span><span class="p">:</span><span class="mi">41</span> <span class="n">beautify</span><span class="o">-</span><span class="n">html</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">js</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>  <span class="mi">13178</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">14</span><span class="p">:</span><span class="mi">40</span> <span class="n">beautify</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">js</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">2013</span> <span class="n">Jul</span>  <span class="mi">6</span> <span class="mi">14</span><span class="p">:</span><span class="mi">14</span> <span class="n">googlecode</span><span class="o">.</span><span class="n">css</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>  <span class="mi">10989</span> <span class="n">Jan</span>  <span class="mi">1</span>  <span class="mi">1980</span> <span class="n">highlight</span><span class="o">.</span><span class="nb">pack</span><span class="o">.</span><span class="n">js</span>
  <span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>  <span class="mi">24014</span> <span class="n">Jun</span> <span class="mi">28</span> <span class="mi">10</span><span class="p">:</span><span class="mi">18</span> <span class="n">zepto</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">js</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>  <span class="mi">11467</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">23</span><span class="p">:</span><span class="mi">37</span> <span class="n">gear128</span><span class="o">.</span><span class="n">png</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">1081</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">23</span><span class="p">:</span><span class="mi">29</span> <span class="n">gear19</span><span class="o">.</span><span class="n">png</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">2201</span> <span class="n">Jul</span>  <span class="mi">9</span> <span class="mi">09</span><span class="p">:</span><span class="mi">57</span> <span class="n">load</span><span class="o">.</span><span class="n">js</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">2499</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">11</span><span class="p">:</span><span class="mi">14</span> <span class="n">maintab</span><span class="o">.</span><span class="n">css</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">1994</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">11</span><span class="p">:</span><span class="mi">09</span> <span class="n">maintab</span><span class="o">.</span><span class="n">html</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">7325</span> <span class="n">Jul</span>  <span class="mi">9</span> <span class="mi">09</span><span class="p">:</span><span class="mi">41</span> <span class="n">maintab</span><span class="o">.</span><span class="n">js</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>    <span class="mi">609</span> <span class="n">Jul</span>  <span class="mi">9</span> <span class="mi">11</span><span class="p">:</span><span class="mi">45</span> <span class="n">manifest</span><span class="o">.</span><span class="n">json</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>    <span class="mi">555</span> <span class="n">Jul</span>  <span class="mi">7</span> <span class="mi">12</span><span class="p">:</span><span class="mi">33</span> <span class="n">options</span><span class="o">.</span><span class="n">css</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>   <span class="mi">2128</span> <span class="n">Jul</span>  <span class="mi">8</span> <span class="mi">23</span><span class="p">:</span><span class="mi">41</span> <span class="n">options</span><span class="o">.</span><span class="n">html</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span>  <span class="n">tomi</span>    <span class="mi">766</span> <span class="n">Jul</span>  <span class="mi">7</span> <span class="mi">12</span><span class="p">:</span><span class="mi">53</span> <span class="n">options</span><span class="o">.</span><span class="n">js</span>
</pre></div>


<h2>Feedback</h2>
<p>Report issues and feedback below. I already have a few new TODOs in my mind -
what would you like to see in the next version?</p>
<p>Enjoy the extension. And the summer ;)</p>

    <p class="author">&mdash; Tomi Mickelsson</p>













    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'tomicloud'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>









    </div>

    <div id="footer">



    <p>
    <a class="icon" href="http://twitter.com/tomimickelsson"><span id="icotwitter">&nbsp;</span> twitter</a> |
    <a class="icon" href="mailto:tomi.mickelsson@iki.fi"><span id="icoenve">&nbsp;</span> tomi.mickelsson@iki.fi</a>

    </p>

    <p>&copy; 2015 Tomi Mickelsson</p>

    </div>
    </div>














</body>


    

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    
    <script src="/static/main.js"></script>


<script type="text/javascript">
    $(document).ready(function(){
        MAIN.main();
    });
</script>









</html>

